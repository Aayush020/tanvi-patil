CREATE DATABASE property_db;
USE property_db;

-- ADMIN USERS
CREATE TABLE admin_users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE,
    password VARCHAR(255),
    role ENUM('super','standard'),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- PROPERTIES
CREATE TABLE properties (
    id INT AUTO_INCREMENT PRIMARY KEY,
    title VARCHAR(200),
    property_type VARCHAR(50),
    location VARCHAR(150),
    distance_km FLOAT,
    size_sqft FLOAT,
    display_price DECIMAL(15,2),
    status ENUM('Available','Negotiation','Sold'),
    description TEXT,
    owner_name VARCHAR(100),
    owner_contact VARCHAR(20),
    documents_status VARCHAR(100),
    purchase_price DECIMAL(15,2),
    sold_price DECIMAL(15,2),
    profit DECIMAL(15,2),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- REVENUE
CREATE TABLE revenue (
    id INT AUTO_INCREMENT PRIMARY KEY,
    property_id INT,
    revenue DECIMAL(15,2),
    profit DECIMAL(15,2),
    loss DECIMAL(15,2),
    month INT,
    quarter INT,
    year INT,
    FOREIGN KEY (property_id) REFERENCES properties(id)
);

-- COLLABORATIONS
CREATE TABLE collaborations (
    id INT AUTO_INCREMENT PRIMARY KEY,
    category VARCHAR(100),
    title VARCHAR(150),
    description TEXT,
    contact_info VARCHAR(100),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);





# -----------------------------
# EMAIL CONFIG
# -----------------------------
app.config['MAIL_SERVER'] = 'smtp.gmail.com'
app.config['MAIL_PORT'] = 587
app.config['MAIL_USE_TLS'] = True
app.config['MAIL_USE_SSL'] = False
app.config['MAIL_USERNAME'] = "porwalayush020@gmail.com"
app.config['MAIL_PASSWORD'] = "nmcz ofuo wfay gckj"  # Gmail App Password
app.config['MAIL_DEFAULT_SENDER'] = app.config['MAIL_USERNAME']
app.config['MAIL_DEBUG'] = True
mail = Mail(app)